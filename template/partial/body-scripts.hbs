<script src="../../lib/es6/es6-promise.min.js"></script>
<script src="../../lib/es6/es6-bind.js"></script>
<script src="../../lib/es6/es6-array.js"></script>
<script src="../../lib/es6/es6-object-assign.js"></script>
<script src="../../lib/es6/es6-fetch.js"></script>
<script src="../../lib/red5pro/red5pro-sdk.min.js"></script>
<script>
  (function(window) {
    var configuration = (function () {
      var conf = sessionStorage.getItem('r5proTestBed');
      try {
        return JSON.parse(conf);
      }
      catch (e) {
        console.error('Could not read testbed configuration from sessionstorage: ' + e.message);
      }
      return {}
    })();

    if (configuration.verboseLogging) {
      window.publisherLog = function (message) {
        console.log('[Red5ProRTMPPublisher:SWF] - ' + message);
      };
      window.subscriberLog = function (message) {
        console.log('[Red5ProRTMPSubscriber:SWF] - ' + message);
      };
    }

    var backLink = document.getElementById('back-link-container')
    if (backLink && configuration.authentication.enabled) {
      var node = document.createElement('div');
      node.classList.add('hint-block', 'auth-alert');
      var note = document.createElement('span');
      note.classList.add('strong');
      note.innerHTML = '*Authentication is Enabled*';
      var link = document.createElement('a');
      link.innerText = 'Click here to disable.';
      link.href= '../../index.html';
      link.classList.add('auth-link');
      node.appendChild(note);
      node.appendChild(link);
      var testBody = backLink.nextElementSibling;
      testBody.parentNode.insertBefore(node, testBody);
    }

    if (backLink && configuration.preferWhipWhep) {
      var node = document.createElement('div');
      node.classList.add('hint-block', 'auth-alert');
      var note = document.createElement('span');
      note.classList.add('strong');
      note.innerHTML = '*WHIP/WHEP Client is enabled for this test*';
      var link = document.createElement('a');
      link.innerText = 'Click here to disable.';
      link.href= '../../index.html';
      link.classList.add('auth-link');
      node.appendChild(note);
      node.appendChild(link);
      var testBody = backLink.nextElementSibling;
      testBody.parentNode.insertBefore(node, testBody);
    }

  })(this);
</script>
